<!DOCTYPE html>
<html>
<head>
<title>Pheenix: Routine at 27471</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27441.html">27441</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27471">Map</a></td>
<td class="next">
Next: <a href="27545.html">27545</a>
</td>
</tr>
</table>
<div class="description">27471: Print Control Menu</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="32217.html">StartGame</a>.
</div>
<div class="paragraph">
<table class="">
<tr>
<td class="" colspan="1" rowspan="1"><img alt="menu" src="../../images/scr/menu.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Print_ControlMenu</td>
<td class="address-2"><span id="27471"></span>27471</td>
<td class="instruction">CALL <a href="26400.html">ClearScreen</a></td>
<td class="comment-1" rowspan="1">Call <a href="26400.html">ClearScreen</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27474"></span>
<div class="comments">
<div class="paragraph">
Print "Select Joystick Or Keys".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27474"></span>27474</td>
<td class="instruction">LD HL,25809</td>
<td class="comment-1" rowspan="4">Call <a href="26479.html">Configurable_PrintString</a> using <a href="25809.html">Messaging_SelectJoystickOrKeys</a>; printing 23 characters in YELLOW.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27477"></span>27477</td>
<td class="instruction">LD DE,16580</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27480"></span>27480</td>
<td class="instruction">LD BC,5894</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27483"></span>27483</td>
<td class="instruction">CALL <a href="26479.html">Configurable_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27486"></span>
<div class="comments">
<div class="paragraph">
Print "K - Kempston Stick".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27486"></span>27486</td>
<td class="instruction">LD DE,18503</td>
<td class="comment-1" rowspan="3">Call <a href="26479.html#26485">SpectrumFont_PrintString</a> using <a href="25809.html#25832">Messaging_KempstonJoystick</a>; printing 18 characters in INK:MAGENTA,
PAPER:BLACK(BRIGHT).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27489"></span>27489</td>
<td class="instruction">LD BC,4675</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27492"></span>27492</td>
<td class="instruction">CALL <a href="26479.html#26485">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27495"></span>
<div class="comments">
<div class="paragraph">
Print "A - AGF Stick".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27495"></span>27495</td>
<td class="instruction">LD E,135</td>
<td class="comment-1" rowspan="3">Call <a href="26479.html#26485">SpectrumFont_PrintString</a> using <a href="25809.html#25850">Messaging_AGFJoystick</a>; printing 13 characters.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27497"></span>27497</td>
<td class="instruction">LD B,13</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27499"></span>27499</td>
<td class="instruction">CALL <a href="26479.html#26485">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27502"></span>
<div class="comments">
<div class="paragraph">
Print "B - Keyboard".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27502"></span>27502</td>
<td class="instruction">LD E,199</td>
<td class="comment-1" rowspan="3">Call <a href="26479.html#26485">SpectrumFont_PrintString</a> using <a href="25809.html#25863">Messaging_Keyboard</a>; printing 12 characters.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27504"></span>27504</td>
<td class="instruction">LD B,12</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27506"></span>27506</td>
<td class="instruction">CALL <a href="26479.html#26485">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27509"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use a Kempston joystick?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_Kempston</td>
<td class="address-2"><span id="27509"></span>27509</td>
<td class="instruction">LD A,191</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">191</td>
<td class="centre" colspan="1" rowspan="1">ENTER</td>
<td class="centre" colspan="1" rowspan="1">L</td>
<td class="centre" colspan="1" rowspan="1">K</td>
<td class="centre" colspan="1" rowspan="1">J</td>
<td class="centre" colspan="1" rowspan="1">H</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27511"></span>27511</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27513"></span>27513</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="27471.html#27521">ControlMenu_Input_AGF</a> if "K" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27515"></span>27515</td>
<td class="instruction">JR NZ,<a href="27471.html#27521">ControlMenu_Input_AGF</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27517"></span>27517</td>
<td class="instruction">LD A,2</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to Kempston joystick controls (2).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27519"></span>27519</td>
<td class="instruction">JR <a href="27471.html#27542">SetControlMethod</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27471.html#27542">SetControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27521"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use an AGF joystick?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_AGF</td>
<td class="address-2"><span id="27521"></span>27521</td>
<td class="instruction">LD A,253</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">253</td>
<td class="centre" colspan="1" rowspan="1">A</td>
<td class="centre" colspan="1" rowspan="1">S</td>
<td class="centre" colspan="1" rowspan="1">D</td>
<td class="centre" colspan="1" rowspan="1">F</td>
<td class="centre" colspan="1" rowspan="1">G</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27523"></span>27523</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27525"></span>27525</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="27471.html#27533">ControlMenu_Input_Keyboard</a> if "A" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27527"></span>27527</td>
<td class="instruction">JR NZ,<a href="27471.html#27533">ControlMenu_Input_Keyboard</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27529"></span>27529</td>
<td class="instruction">LD A,1</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to AGF joystick controls (1).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27531"></span>27531</td>
<td class="instruction">JR <a href="27471.html#27542">SetControlMethod</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27471.html#27542">SetControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27533"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use the keyboard?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_Keyboard</td>
<td class="address-2"><span id="27533"></span>27533</td>
<td class="instruction">LD A,127</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">127</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27535"></span>27535</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27537"></span>27537</td>
<td class="instruction">BIT 4,A</td>
<td class="comment-1" rowspan="2">Jump back to <a href="27471.html#27509">ControlMenu_Input_Kempston</a> if "B" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27539"></span>27539</td>
<td class="instruction">JR NZ,<a href="27471.html#27509">ControlMenu_Input_Kempston</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27541"></span>27541</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to keyboard controls (0).</td>
</tr>
<tr>
<td class="asm-label">SetControlMethod</td>
<td class="address-2"><span id="27542"></span>27542</td>
<td class="instruction">LD (26358),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="26358.html">ControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<div class="comments">
<div class="paragraph">
Continue on to <a href="27545.html">Print_InstructionsMenu</a>.
</div>
</div>
</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27441.html">27441</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27471">Map</a></td>
<td class="next">
Next: <a href="27545.html">27545</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Megadodo Software &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/pheenix/">Source code</a>.</div>
<div><a href="../../asm/6B4F.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>