<!DOCTYPE html>
<html>
<head>
<title>Pheenix: Routine at 31591</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="31154.html">31154</a>
</td>
<td class="up">Up: <a href="../maps/all.html#31591">Map</a></td>
<td class="next">
Next: <a href="31874.html">31874</a>
</td>
</tr>
</table>
<div class="description">31591: Handler: Aliens</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="31874.html">TitleScreen</a> and <a href="32217.html">StartGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="31591"></span>
<div class="comments">
<div class="paragraph">
See <a href="../reference/pokes.html#aliens-not-fire">Aliens Don't Fire</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens</td>
<td class="address-2"><span id="31591"></span>31591</td>
<td class="instruction">LD A,(26257)</td>
<td class="comment-1" rowspan="3">Return if *<a href="26257.html">26257</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31594"></span>31594</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31595"></span>31595</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31596"></span>31596</td>
<td class="instruction">LD A,(26261)</td>
<td class="comment-1" rowspan="3">Return if *<a href="26261.html">Bullet_RateLimiter</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31599"></span>31599</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31600"></span>31600</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31601"></span>31601</td>
<td class="instruction">LD HL,26279</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="26279.html">26279</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31604"></span>31604</td>
<td class="instruction">LD B,6</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=6.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_0</td>
<td class="address-2"><span id="31606"></span>31606</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31607"></span>31607</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31608"></span>31608</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31609"></span>31609</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31610"></span>31610</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31611"></span>31611</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31768">Handler_Aliens_12</a> if <span class="register">D</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31612"></span>31612</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31613"></span>31613</td>
<td class="instruction">JP NZ,<a href="31591.html#31768">Handler_Aliens_12</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31616"></span>31616</td>
<td class="instruction">LD A,(26276)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31862">Handler_Aliens_19</a> if *<a href="26276.html">Flag_Collision</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31619"></span>31619</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31620"></span>31620</td>
<td class="instruction">JP NZ,<a href="31591.html#31862">Handler_Aliens_19</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31623"></span>31623</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31624"></span>31624</td>
<td class="instruction">LD HL,26297</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="26297.html">26297</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31627"></span>31627</td>
<td class="instruction">LD A,(26298)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31651">Handler_Aliens_3</a> if *<a href="26298.html">26298</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31630"></span>31630</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31631"></span>31631</td>
<td class="instruction">JR NZ,<a href="31591.html#31651">Handler_Aliens_3</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31633"></span>31633</td>
<td class="instruction">LD A,(26353)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26353.html">Phase</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31636"></span>31636</td>
<td class="instruction">AND %00000110</td>
<td class="comment-1" rowspan="1">Keep only bits 1-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31638"></span>31638</td>
<td class="instruction">LD A,28</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=28.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31640"></span>31640</td>
<td class="instruction">JR Z,<a href="31591.html#31644">Handler_Aliens_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31644">Handler_Aliens_1</a> if <span class="register">HL</span> is equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31642"></span>31642</td>
<td class="instruction">LD A,14</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=14.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_1</td>
<td class="address-2"><span id="31644"></span>31644</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="31591.html#31649">Handler_Aliens_2</a> if *<span class="register">HL</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31645"></span>31645</td>
<td class="instruction">JR NZ,<a href="31591.html#31649">Handler_Aliens_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31647"></span>31647</td>
<td class="instruction">LD (HL),254</td>
<td class="comment-1" rowspan="1">Write 254 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_2</td>
<td class="address-2"><span id="31649"></span>31649</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="2">Increment *<span class="register">HL</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31650"></span>31650</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_3</td>
<td class="address-2"><span id="31651"></span>31651</td>
<td class="instruction">LD L,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31652"></span>31652</td>
<td class="instruction">LD H,0</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31654"></span>31654</td>
<td class="instruction">LD DE,26077</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>+=<a href="26077.html">Table_AlienWaveData</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31657"></span>31657</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31658"></span>31658</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31659"></span>31659</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31660"></span>31660</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31661"></span>31661</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31671">Handler_Aliens_4</a> if <span class="register">D</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31662"></span>31662</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31663"></span>31663</td>
<td class="instruction">JR NZ,<a href="31591.html#31671">Handler_Aliens_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31665"></span>31665</td>
<td class="instruction">LD HL,26298</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="26298.html">26298</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31668"></span>31668</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31669"></span>31669</td>
<td class="instruction">JR <a href="31591.html#31765">Handler_Aliens_11</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31765">Handler_Aliens_11</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_4</td>
<td class="address-2"><span id="31671"></span>31671</td>
<td class="instruction">CALL <a href="26359.html">ConvertScreenToAttributeBufferAddress</a></td>
<td class="comment-1" rowspan="1">Call <a href="26359.html">ConvertScreenToAttributeBufferAddress</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31674"></span>31674</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31765">Handler_Aliens_11</a> if <span class="register">D</span> is equal to 88.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31675"></span>31675</td>
<td class="instruction">CP 88</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31677"></span>31677</td>
<td class="instruction">JR Z,<a href="31591.html#31765">Handler_Aliens_11</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31679"></span>31679</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">E</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31680"></span>31680</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31682"></span>31682</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31683"></span>31683</td>
<td class="instruction">LD A,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31686"></span>31686</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31688"></span>31688</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="2">Jump to <a href="31591.html#31698">Handler_Aliens_6</a> if <span class="register">A</span> is less than <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31689"></span>31689</td>
<td class="instruction">JR C,<a href="31591.html#31698">Handler_Aliens_6</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31691"></span>31691</td>
<td class="instruction">SUB B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_5</td>
<td class="address-2"><span id="31692"></span>31692</td>
<td class="instruction">CP 8</td>
<td class="comment-1" rowspan="2">Jump to <a href="31591.html#31765">Handler_Aliens_11</a> if <span class="register">A</span> is greater than or equal to 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31694"></span>31694</td>
<td class="instruction">JR NC,<a href="31591.html#31765">Handler_Aliens_11</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31696"></span>31696</td>
<td class="instruction">JR <a href="31591.html#31703">Handler_Aliens_7</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31703">Handler_Aliens_7</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_6</td>
<td class="address-2"><span id="31698"></span>31698</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31699"></span>31699</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="2"><span class="register">A</span>=<span class="register">B</span>-<span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31700"></span>31700</td>
<td class="instruction">SUB C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31701"></span>31701</td>
<td class="instruction">JR <a href="31591.html#31692">Handler_Aliens_5</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31692">Handler_Aliens_5</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_7</td>
<td class="address-2"><span id="31703"></span>31703</td>
<td class="instruction">LD HL,65</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>=0065+<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31706"></span>31706</td>
<td class="instruction">ADD HL,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31707"></span>31707</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31708"></span>31708</td>
<td class="instruction">LD DE,23264</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=23264 (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31711"></span>31711</td>
<td class="instruction">LD A,(26259)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31719">Handler_Aliens_8</a> if *<a href="26259.html">Flag_Shield</a> is inactive.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31714"></span>31714</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31715"></span>31715</td>
<td class="instruction">JR Z,<a href="31591.html#31719">Handler_Aliens_8</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31717"></span>31717</td>
<td class="instruction">LD E,192</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=192.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_8</td>
<td class="address-2"><span id="31719"></span>31719</td>
<td class="instruction">SBC HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>-=<span class="register">DE</span> (with carry).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31721"></span>31721</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31722"></span>31722</td>
<td class="instruction">JR NC,<a href="31591.html#31765">Handler_Aliens_11</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31765">Handler_Aliens_11</a> if <span class="register">A</span> is greater than or equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31724"></span>31724</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31725"></span>31725</td>
<td class="instruction">LD HL,26298</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="26298.html">26298</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31728"></span>31728</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31729"></span>31729</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31736">Handler_Aliens_9</a> if *<span class="register">HL</span> is not equal to 4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31730"></span>31730</td>
<td class="instruction">CP 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31732"></span>31732</td>
<td class="instruction">JR NZ,<a href="31591.html#31736">Handler_Aliens_9</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31734"></span>31734</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_9</td>
<td class="address-2"><span id="31736"></span>31736</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31737"></span>31737</td>
<td class="instruction">LD A,(26353)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26353.html">Phase</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31740"></span>31740</td>
<td class="instruction">AND %00000010</td>
<td class="comment-1" rowspan="1">Keep only bit 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31742"></span>31742</td>
<td class="instruction">LD A,3</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31744"></span>31744</td>
<td class="instruction">JR Z,<a href="31591.html#31754">Handler_Aliens_10</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31754">Handler_Aliens_10</a> if <span class="register">HL</span> is equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31746"></span>31746</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31747"></span>31747</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31754">Handler_Aliens_10</a> if *<span class="register">HL</span> is not equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31748"></span>31748</td>
<td class="instruction">CP 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31750"></span>31750</td>
<td class="instruction">JR NZ,<a href="31591.html#31754">Handler_Aliens_10</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31752"></span>31752</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31753"></span>31753</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_10</td>
<td class="address-2"><span id="31754"></span>31754</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="3">Multiply <span class="register">A</span> by 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31755"></span>31755</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31756"></span>31756</td>
<td class="instruction">ADD A,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31757"></span>31757</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="2">Restore <span class="register">HL</span> and <span class="register">DE</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31758"></span>31758</td>
<td class="instruction">POP DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31759"></span>31759</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1">Increment <span class="register">DE</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31760"></span>31760</td>
<td class="instruction">LD (DE),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31761"></span>31761</td>
<td class="instruction">LD IXl,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31763"></span>31763</td>
<td class="instruction">JR <a href="31591.html#31809">Handler_Aliens_14</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31809">Handler_Aliens_14</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_11</td>
<td class="address-2"><span id="31765"></span>31765</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31766"></span>31766</td>
<td class="instruction">JR <a href="31591.html#31824">Handler_Aliens_15</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31824">Handler_Aliens_15</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_12</td>
<td class="address-2"><span id="31768"></span>31768</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Exchange the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31769"></span>31769</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31824">Handler_Aliens_15</a> if *<span class="register">HL</span> is equal to INK:YELLOW,
PAPER:BLACK(BRIGHT).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31770"></span>31770</td>
<td class="instruction">CP 70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31772"></span>31772</td>
<td class="instruction">JR Z,<a href="31591.html#31824">Handler_Aliens_15</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31774"></span>31774</td>
<td class="instruction">CP 7</td>
<td class="comment-1" rowspan="2">Jump to <a href="31591.html#31824">Handler_Aliens_15</a> if *<span class="register">HL</span> is equal to WHITE.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31776"></span>31776</td>
<td class="instruction">JR Z,<a href="31591.html#31824">Handler_Aliens_15</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31778"></span>31778</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31780"></span>31780</td>
<td class="instruction">INC DE</td>
<td class="comment-1" rowspan="1">Increment <span class="register">DE</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31781"></span>31781</td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31782"></span>31782</td>
<td class="instruction">LD IXl,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31784"></span>31784</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31785"></span>31785</td>
<td class="instruction">CALL <a href="26372.html">ConvertAttributeToScreenBufferAddress</a></td>
<td class="comment-1" rowspan="1">Call <a href="26372.html">ConvertAttributeToScreenBufferAddress</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31788"></span>31788</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31790"></span>31790</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_13</td>
<td class="address-2"><span id="31791"></span>31791</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31792"></span>31792</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31793"></span>31793</td>
<td class="instruction">DJNZ <a href="31591.html#31791">Handler_Aliens_13</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="31591.html#31791">Handler_Aliens_13</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31795"></span>31795</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31796"></span>31796</td>
<td class="instruction">LD C,32</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=32.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31798"></span>31798</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31799"></span>31799</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31800"></span>31800</td>
<td class="instruction">LD BC,23296</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=23296 (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31803"></span>31803</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="2"><span class="register">HL</span>-=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31804"></span>31804</td>
<td class="instruction">SBC HL,BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31806"></span>31806</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31807"></span>31807</td>
<td class="instruction">JR NC,<a href="31591.html#31824">Handler_Aliens_15</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31824">Handler_Aliens_15</a> if <span class="register">H</span> is greater than or equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_14</td>
<td class="address-2"><span id="31809"></span>31809</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31828">Handler_Aliens_16</a> if *<span class="register">HL</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31810"></span>31810</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31811"></span>31811</td>
<td class="instruction">JR Z,<a href="31591.html#31828">Handler_Aliens_16</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31813"></span>31813</td>
<td class="instruction">LD A,(26259)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31824">Handler_Aliens_15</a> if *<a href="26259.html">Flag_Shield</a> is active.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31816"></span>31816</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31817"></span>31817</td>
<td class="instruction">JR NZ,<a href="31591.html#31824">Handler_Aliens_15</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31819"></span>31819</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="31591.html#31828">Handler_Aliens_16</a> if *<span class="register">HL</span> is equal to INK:YELLOW,
PAPER:BLACK(BRIGHT).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31820"></span>31820</td>
<td class="instruction">CP 70</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31822"></span>31822</td>
<td class="instruction">JR Z,<a href="31591.html#31828">Handler_Aliens_16</a></td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_15</td>
<td class="address-2"><span id="31824"></span>31824</td>
<td class="instruction">LD D,0</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31826"></span>31826</td>
<td class="instruction">JR <a href="31591.html#31862">Handler_Aliens_19</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31862">Handler_Aliens_19</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_16</td>
<td class="address-2"><span id="31828"></span>31828</td>
<td class="instruction">LD A,(26353)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26353.html">Phase</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31831"></span>31831</td>
<td class="instruction">AND %00000010</td>
<td class="comment-1" rowspan="1">Keep only bit 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31833"></span>31833</td>
<td class="instruction">LD A,69</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=69.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31835"></span>31835</td>
<td class="instruction">JR Z,<a href="31591.html#31839">Handler_Aliens_17</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31839">Handler_Aliens_17</a> if <span class="register">A</span> is equal to 69.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31837"></span>31837</td>
<td class="instruction">LD A,6</td>
<td class="comment-1" rowspan="2">Write 6 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_17</td>
<td class="address-2"><span id="31839"></span>31839</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31840"></span>31840</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31841"></span>31841</td>
<td class="instruction">CALL <a href="26372.html">ConvertAttributeToScreenBufferAddress</a></td>
<td class="comment-1" rowspan="1">Call <a href="26372.html">ConvertAttributeToScreenBufferAddress</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31844"></span>31844</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Exchange the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31845"></span>31845</td>
<td class="instruction">LD HL,24622</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="24622.html">Graphics_Bullets_01</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31848"></span>31848</td>
<td class="instruction">LD C,IXl</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31850"></span>31850</td>
<td class="instruction">LD B,0</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31852"></span>31852</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">BC</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31853"></span>31853</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1">Set a line counter in <span class="register">B</span> (8 lines in a UDG).</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_18</td>
<td class="address-2"><span id="31855"></span>31855</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="2">Copy the UDG data to the screen buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31856"></span>31856</td>
<td class="instruction">LD (DE),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31857"></span>31857</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1">Move down one pixel line in the screen buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31858"></span>31858</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Move to the next UDG graphic data byte.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31859"></span>31859</td>
<td class="instruction">DJNZ <a href="31591.html#31855">Handler_Aliens_18</a></td>
<td class="comment-1" rowspan="1">Decrease the line counter by one and loop back to <a href="31591.html#31855">Handler_Aliens_18</a> until all 8 lines of the UDG character have been drawn.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31861"></span>31861</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="2">Restore <span class="register">DE</span> and <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label">Handler_Aliens_19</td>
<td class="address-2"><span id="31862"></span>31862</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31863"></span>31863</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-1" rowspan="1">Write <span class="register">E</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31864"></span>31864</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31865"></span>31865</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-1" rowspan="1">Write <span class="register">D</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31866"></span>31866</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment <span class="register">HL</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31867"></span>31867</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31868"></span>31868</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31869"></span>31869</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31870"></span>31870</td>
<td class="instruction">JP NZ,<a href="31591.html#31606">Handler_Aliens_0</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="31591.html#31606">Handler_Aliens_0</a> if <span class="register">B</span> is not equal to 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="31873"></span>31873</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="31154.html">31154</a>
</td>
<td class="up">Up: <a href="../maps/all.html#31591">Map</a></td>
<td class="next">
Next: <a href="31874.html">31874</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Megadodo Software &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/pheenix/">Source code</a>.</div>
<div><a href="../../asm/7B67.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>