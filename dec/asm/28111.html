<!DOCTYPE html>
<html>
<head>
<title>Pheenix: Routine at 28111</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27886.html">27886</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28111">Map</a></td>
<td class="next">
Next: <a href="28720.html">28720</a>
</td>
</tr>
</table>
<div class="description">28111: Handler: Player Ship/ Shield</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="27886.html">Handler_PlayerDeathGameOver</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield</td>
<td class="address-2"><span id="28111"></span>28111</td>
<td class="instruction">CALL <a href="27805.html">CheckCollision</a></td>
<td class="comment-1" rowspan="1">Call <a href="27805.html">CheckCollision</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28114"></span>28114</td>
<td class="instruction">LD A,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28117"></span>28117</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash the player position on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28118"></span>28118</td>
<td class="instruction">LD HL,26260</td>
<td class="comment-1" rowspan="4">Jump to <a href="28111.html#28136">PlayerShipShield_CheckInput</a> if *<a href="26260.html">ShieldTimer</a> isn't active.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28121"></span>28121</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28122"></span>28122</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28123"></span>28123</td>
<td class="instruction">JR Z,<a href="28111.html#28136">PlayerShipShield_CheckInput</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28125"></span>
<div class="comments">
<div class="paragraph">
The players shield is active, so decrease the shield timer.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28125"></span>28125</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<a href="26260.html">ShieldTimer</a> by one.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28126"></span>
<div class="comments">
<div class="paragraph">
Check if the timer has "wrapped around" to 255 i.e. finished counting down.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28126"></span>28126</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28192">PlayerShip_Draw</a> if bit 7 of *<a href="26260.html">ShieldTimer</a> is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28128"></span>28128</td>
<td class="instruction">JR NZ,<a href="28111.html#28192">PlayerShip_Draw</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28130"></span>28130</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="2">Write 0 ("inactive") to *<a href="26259.html">Flag_Shield</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28131"></span>28131</td>
<td class="instruction">LD (26259),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28134"></span>28134</td>
<td class="instruction">JR <a href="28111.html#28192">PlayerShip_Draw</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28192">PlayerShip_Draw</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28136"></span>
<div class="comments">
<div class="paragraph">
Check for shield activation player input.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PlayerShipShield_CheckInput</td>
<td class="address-2"><span id="28136"></span>28136</td>
<td class="instruction">LD A,(26355)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28150">PlayerShipShield_CheckKempston</a> if *<a href="26355.html">Flag_ActiveDemoMode</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28139"></span>28139</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28140"></span>28140</td>
<td class="instruction">JR Z,<a href="28111.html#28150">PlayerShipShield_CheckKempston</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28142"></span>28142</td>
<td class="instruction">CALL <a href="26382.html">GenerateRandomNumber</a></td>
<td class="comment-1" rowspan="1">Call <a href="26382.html">GenerateRandomNumber</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28145"></span>28145</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28187">Handler_PlayerShipShield_1</a> if the generated random number is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28146"></span>28146</td>
<td class="instruction">JR Z,<a href="28111.html#28187">Handler_PlayerShipShield_1</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28148"></span>28148</td>
<td class="instruction">JR <a href="28111.html#28192">PlayerShip_Draw</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28192">PlayerShip_Draw</a>.</td>
</tr>
<tr>
<td class="asm-label">PlayerShipShield_CheckKempston</td>
<td class="address-2"><span id="28150"></span>28150</td>
<td class="instruction">LD A,(26358)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28165">PlayerShipShield_CheckAGF</a> if *<a href="26358.html">ControlMethod</a> is not equal to 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28153"></span>28153</td>
<td class="instruction">CP 2</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28155"></span>28155</td>
<td class="instruction">JR NZ,<a href="28111.html#28165">PlayerShipShield_CheckAGF</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28157"></span>28157</td>
<td class="instruction">IN A,(31)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=read from the Kempston joystick port.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28159"></span>28159</td>
<td class="instruction">AND %00000100</td>
<td class="comment-1" rowspan="1">Keep only bit 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28161"></span>28161</td>
<td class="instruction">JR NZ,<a href="28111.html#28187">Handler_PlayerShipShield_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28187">Handler_PlayerShipShield_1</a> if <span class="register">A</span> is not equal to 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28163"></span>28163</td>
<td class="instruction">JR <a href="28111.html#28192">PlayerShip_Draw</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28192">PlayerShip_Draw</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28165"></span>
<div class="comments">
<div class="paragraph">
Check if the control method is the AGF joystick?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PlayerShipShield_CheckAGF</td>
<td class="address-2"><span id="28165"></span>28165</td>
<td class="instruction">CP 1</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28179">Handler_PlayerShipShield_0</a> if *<a href="26358.html">ControlMethod</a> is not the AGF joystick.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28167"></span>28167</td>
<td class="instruction">JR NZ,<a href="28111.html#28179">Handler_PlayerShipShield_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28169"></span>28169</td>
<td class="instruction">LD A,239</td>
<td class="comment-1" rowspan="1"><table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">239</td>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="centre" colspan="1" rowspan="1">9</td>
<td class="centre" colspan="1" rowspan="1">8</td>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="centre" colspan="1" rowspan="1">6</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28171"></span>28171</td>
<td class="instruction">IN A,(254)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=byte from port 254.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28173"></span>28173</td>
<td class="instruction">BIT 4,A</td>
<td class="comment-1" rowspan="1">Test bit 4 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28175"></span>28175</td>
<td class="instruction">JR Z,<a href="28111.html#28187">Handler_PlayerShipShield_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28187">Handler_PlayerShipShield_1</a> if <span class="register">A</span> is equal to 239.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28177"></span>28177</td>
<td class="instruction">JR <a href="28111.html#28192">PlayerShip_Draw</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28192">PlayerShip_Draw</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_0</td>
<td class="address-2"><span id="28179"></span>28179</td>
<td class="instruction">LD A,191</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">191</td>
<td class="centre" colspan="1" rowspan="1">ENTER</td>
<td class="centre" colspan="1" rowspan="1">L</td>
<td class="centre" colspan="1" rowspan="1">K</td>
<td class="centre" colspan="1" rowspan="1">J</td>
<td class="centre" colspan="1" rowspan="1">H</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28181"></span>28181</td>
<td class="instruction">IN A,(254)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28183"></span>28183</td>
<td class="instruction">AND %00000001</td>
<td class="comment-1" rowspan="1">Keep only bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28185"></span>28185</td>
<td class="instruction">JR NZ,<a href="28111.html#28192">PlayerShip_Draw</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28192">PlayerShip_Draw</a> if <span class="register">A</span> is not equal to 191.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_1</td>
<td class="address-2"><span id="28187"></span>28187</td>
<td class="instruction">LD (HL),255</td>
<td class="comment-1" rowspan="1">Write 255 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28189"></span>28189</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28190"></span>28190</td>
<td class="instruction">LD (HL),1</td>
<td class="comment-1" rowspan="1">Write 1 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28192"></span>
<div class="comments">
<div class="paragraph">
Draw the players ship.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PlayerShip_Draw</td>
<td class="address-2"><span id="28192"></span>28192</td>
<td class="instruction">LD A,(26259)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28408">Handler_PlayerShipShield_14</a> if *<a href="26259.html">Flag_Shield</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28195"></span>28195</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28196"></span>28196</td>
<td class="instruction">JP Z,<a href="28111.html#28408">Handler_PlayerShipShield_14</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28199"></span>28199</td>
<td class="instruction">LD A,(26355)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28224">Handler_PlayerShipShield_2</a> if *<a href="26355.html">Flag_ActiveDemoMode</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28202"></span>28202</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28203"></span>28203</td>
<td class="instruction">JR NZ,<a href="28111.html#28224">Handler_PlayerShipShield_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28205"></span>28205</td>
<td class="instruction">LD A,(26260)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26260.html">ShieldTimer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28208"></span>28208</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28210"></span>28210</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28211"></span>28211</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28212"></span>28212</td>
<td class="instruction">LD HL,222</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=0222.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28215"></span>28215</td>
<td class="instruction">LD D,H</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=<span class="register">H</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28216"></span>28216</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28217"></span>28217</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28218"></span>28218</td>
<td class="instruction">LD E,4</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28220"></span>28220</td>
<td class="instruction">CALL 949</td>
<td class="comment-1" rowspan="1">Call <a "noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/03B5.html">BEEPER</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28223"></span>28223</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_2</td>
<td class="address-2"><span id="28224"></span>28224</td>
<td class="instruction">LD HL,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28227"></span>28227</td>
<td class="instruction">LD H,82</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=82.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28229"></span>28229</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28231"></span>28231</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28234"></span>28234</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_3</td>
<td class="address-2"><span id="28235"></span>28235</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Set the bits from <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28236"></span>28236</td>
<td class="instruction">LD DE,0</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0000.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28239"></span>28239</td>
<td class="instruction">JR NZ,<a href="28111.html#28258">Handler_PlayerShipShield_4</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28258">Handler_PlayerShipShield_4</a> if <span class="register">HL</span> is not equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28241"></span>28241</td>
<td class="instruction">LD A,(26260)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28258">Handler_PlayerShipShield_4</a> if bit 2 of *<a href="26260.html">ShieldTimer</a> is not set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28244"></span>28244</td>
<td class="instruction">BIT 2,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28246"></span>28246</td>
<td class="instruction">JR Z,<a href="28111.html#28258">Handler_PlayerShipShield_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28248"></span>28248</td>
<td class="instruction">LD DE,310</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0310.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28251"></span>28251</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28258">Handler_PlayerShipShield_4</a> if <span class="register">B</span> is not equal to 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28252"></span>28252</td>
<td class="instruction">CP 1</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28254"></span>28254</td>
<td class="instruction">JR NZ,<a href="28111.html#28258">Handler_PlayerShipShield_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28256"></span>28256</td>
<td class="instruction">LD D,128</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=128.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_4</td>
<td class="address-2"><span id="28258"></span>28258</td>
<td class="instruction">LD (28295),DE</td>
<td class="comment-1" rowspan="1">Write <span class="register">DE</span> to *<a href="28111.html#28295">28295</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28262"></span>28262</td>
<td class="instruction">LD (28314),DE</td>
<td class="comment-1" rowspan="1">Write <span class="register">DE</span> to *<a href="28111.html#28314">28314</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28266"></span>28266</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28267"></span>28267</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28268"></span>28268</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28269"></span>28269</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28270"></span>28270</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28271"></span>28271</td>
<td class="instruction">LD HL,28294</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="28111.html#28293">28294</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28274"></span>28274</td>
<td class="instruction">LD A,(26260)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26260.html">ShieldTimer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28277"></span>28277</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Test bit 2 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28279"></span>28279</td>
<td class="instruction">LD A,126</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=126.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28281"></span>28281</td>
<td class="instruction">JR Z,<a href="28111.html#28285">Handler_PlayerShipShield_5</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28285">Handler_PlayerShipShield_5</a> if <span class="register">A</span> is equal to 126.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28283"></span>28283</td>
<td class="instruction">ADD A,64</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=64.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_5</td>
<td class="address-2"><span id="28285"></span>28285</td>
<td class="instruction">ADD A,8</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28287"></span>28287</td>
<td class="instruction">DJNZ <a href="28111.html#28285">Handler_PlayerShipShield_5</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28285">Handler_PlayerShipShield_5</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28289"></span>28289</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28290"></span>28290</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28291"></span>28291</td>
<td class="instruction">LD B,6</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=6.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_6</td>
<td class="address-2"><span id="28293"></span>28293</td>
<td class="instruction">SET 0,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28295"></span>28295</td>
<td class="instruction">LD (HL),1</td>
<td class="comment-1" rowspan="1">Write 1 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28297"></span>28297</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28298"></span>28298</td>
<td class="instruction">DJNZ <a href="28111.html#28293">Handler_PlayerShipShield_6</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28293">Handler_PlayerShipShield_6</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28300"></span>28300</td>
<td class="instruction">LD A,(28294)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="28111.html#28293">28294</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28303"></span>28303</td>
<td class="instruction">LD (28313),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="28111.html#28312">28313</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28306"></span>28306</td>
<td class="instruction">SET 5,L</td>
<td class="comment-1" rowspan="1">Set bit 5 of <span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28308"></span>28308</td>
<td class="instruction">LD H,80</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=80.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28310"></span>28310</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_7</td>
<td class="address-2"><span id="28312"></span>28312</td>
<td class="instruction">SET 0,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28314"></span>28314</td>
<td class="instruction">LD (HL),1</td>
<td class="comment-1" rowspan="1">Write 1 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28316"></span>28316</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28317"></span>28317</td>
<td class="instruction">DJNZ <a href="28111.html#28312">Handler_PlayerShipShield_7</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28312">Handler_PlayerShipShield_7</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28319"></span>28319</td>
<td class="instruction">LD HL,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28322"></span>28322</td>
<td class="instruction">LD H,82</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=82.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28324"></span>28324</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="2">Increment <span class="register">L</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28325"></span>28325</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28326"></span>28326</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28327"></span>28327</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28330"></span>28330</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28331"></span>28331</td>
<td class="instruction">SUB 7</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28333"></span>28333</td>
<td class="instruction">DJNZ <a href="28111.html#28235">Handler_PlayerShipShield_3</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28235">Handler_PlayerShipShield_3</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28335"></span>28335</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28336"></span>28336</td>
<td class="instruction">LD A,(26260)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26260.html">ShieldTimer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28339"></span>28339</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Test bit 2 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28341"></span>28341</td>
<td class="instruction">LD HL,24596</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="24596.html">24596</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28344"></span>28344</td>
<td class="instruction">JR Z,<a href="28111.html#28349">Handler_PlayerShipShield_8</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28349">Handler_PlayerShipShield_8</a> if <span class="register">L</span> is equal to 82.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28346"></span>28346</td>
<td class="instruction">LD HL,24605</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="24596.html#24605">24605</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_8</td>
<td class="address-2"><span id="28349"></span>28349</td>
<td class="instruction">LD DE,24955</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="24923.html#24955">24955</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28352"></span>28352</td>
<td class="instruction">LD C,9</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=9.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28354"></span>28354</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28356"></span>28356</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28385">Handler_PlayerShipShield_12</a> if *<a href="26278.html">BulletIndex</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28359"></span>28359</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28360"></span>28360</td>
<td class="instruction">JR Z,<a href="28111.html#28385">Handler_PlayerShipShield_12</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28362"></span>28362</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_9</td>
<td class="address-2"><span id="28363"></span>28363</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28364"></span>28364</td>
<td class="instruction">LD HL,24955</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="24923.html#24955">24955</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28367"></span>28367</td>
<td class="instruction">LD B,9</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=9.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_10</td>
<td class="address-2"><span id="28369"></span>28369</td>
<td class="instruction">SLA (HL)</td>
<td class="comment-1" rowspan="1">Shift *<span class="register">HL</span> left (with carry).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28371"></span>28371</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28372"></span>28372</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28374"></span>28374</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28375"></span>28375</td>
<td class="instruction">JR Z,<a href="28111.html#28379">Handler_PlayerShipShield_11</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28379">Handler_PlayerShipShield_11</a> if <span class="register">HL</span> is equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28377"></span>28377</td>
<td class="instruction">SET 0,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_11</td>
<td class="address-2"><span id="28379"></span>28379</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28380"></span>28380</td>
<td class="instruction">DJNZ <a href="28111.html#28369">Handler_PlayerShipShield_10</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28369">Handler_PlayerShipShield_10</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28382"></span>28382</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28383"></span>28383</td>
<td class="instruction">DJNZ <a href="28111.html#28363">Handler_PlayerShipShield_9</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28363">Handler_PlayerShipShield_9</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_12</td>
<td class="address-2"><span id="28385"></span>28385</td>
<td class="instruction">LD DE,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28389"></span>28389</td>
<td class="instruction">LD D,80</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=80.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28391"></span>28391</td>
<td class="instruction">LD HL,24955</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="24923.html#24955">24955</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28394"></span>28394</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_13</td>
<td class="address-2"><span id="28396"></span>28396</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28397"></span>28397</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28398"></span>28398</td>
<td class="instruction">LD BC,3</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=0003.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28401"></span>28401</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28403"></span>28403</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1">Restore <span class="register">DE</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28404"></span>28404</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1">Increment <span class="register">D</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28405"></span>28405</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28406"></span>28406</td>
<td class="instruction">DJNZ <a href="28111.html#28396">Handler_PlayerShipShield_13</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28396">Handler_PlayerShipShield_13</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_14</td>
<td class="address-2"><span id="28408"></span>28408</td>
<td class="instruction">LD H,80</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=80.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28410"></span>28410</td>
<td class="instruction">LD A,(26355)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28421">Handler_PlayerShipShield_15</a> if *<a href="26355.html">Flag_ActiveDemoMode</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28413"></span>28413</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28414"></span>28414</td>
<td class="instruction">JR Z,<a href="28111.html#28421">Handler_PlayerShipShield_15</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28416"></span>28416</td>
<td class="instruction">LD A,(26356)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26356.html">26356</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28419"></span>28419</td>
<td class="instruction">JR <a href="28111.html#28471">Handler_PlayerShipShield_18</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28471">Handler_PlayerShipShield_18</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_15</td>
<td class="address-2"><span id="28421"></span>28421</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28422"></span>28422</td>
<td class="instruction">LD A,(26358)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26358.html">ControlMethod</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28425"></span>28425</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28444">Handler_PlayerShipShield_16</a> if <span class="register">A</span> is not equal to 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28427"></span>28427</td>
<td class="instruction">JR NZ,<a href="28111.html#28444">Handler_PlayerShipShield_16</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28429"></span>28429</td>
<td class="instruction">IN A,(31)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=read from the Kempston joystick port.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28431"></span>28431</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28433"></span>28433</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28483">Handler_PlayerShipShield_20</a> if <span class="register">A</span> is equal to 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28435"></span>28435</td>
<td class="instruction">JR Z,<a href="28111.html#28483">Handler_PlayerShipShield_20</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28437"></span>28437</td>
<td class="instruction">CP 1</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28637">Handler_PlayerShipShield_37</a> if <span class="register">A</span> is equal to 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28439"></span>28439</td>
<td class="instruction">JP Z,<a href="28111.html#28637">Handler_PlayerShipShield_37</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28442"></span>28442</td>
<td class="instruction">JR <a href="28111.html#28480">Handler_PlayerShipShield_19</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28480">Handler_PlayerShipShield_19</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_16</td>
<td class="address-2"><span id="28444"></span>28444</td>
<td class="instruction">CP 1</td>
<td class="comment-1" rowspan="2">Jump to <a href="28111.html#28467">Handler_PlayerShipShield_17</a> if <span class="register">A</span> is not equal to 1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28446"></span>28446</td>
<td class="instruction">JR NZ,<a href="28111.html#28467">Handler_PlayerShipShield_17</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28448"></span>28448</td>
<td class="instruction">LD A,247</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=247.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28450"></span>28450</td>
<td class="instruction">IN A,(254)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=byte from port 254.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28452"></span>28452</td>
<td class="instruction">BIT 4,A</td>
<td class="comment-1" rowspan="1">Test bit 4 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28454"></span>28454</td>
<td class="instruction">JR Z,<a href="28111.html#28483">Handler_PlayerShipShield_20</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28483">Handler_PlayerShipShield_20</a> if <span class="register">A</span> is equal to 247.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28456"></span>28456</td>
<td class="instruction">LD A,239</td>
<td class="comment-1" rowspan="1"><table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">239</td>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="centre" colspan="1" rowspan="1">9</td>
<td class="centre" colspan="1" rowspan="1">8</td>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="centre" colspan="1" rowspan="1">6</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28458"></span>28458</td>
<td class="instruction">IN A,(254)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=byte from port 254.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28460"></span>28460</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="1">Test bit 2 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28462"></span>28462</td>
<td class="instruction">JP Z,<a href="28111.html#28637">Handler_PlayerShipShield_37</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28637">Handler_PlayerShipShield_37</a> if <span class="register">A</span> is equal to 239.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28465"></span>28465</td>
<td class="instruction">JR <a href="28111.html#28480">Handler_PlayerShipShield_19</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28480">Handler_PlayerShipShield_19</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_17</td>
<td class="address-2"><span id="28467"></span>28467</td>
<td class="instruction">LD A,254</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=254.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28469"></span>28469</td>
<td class="instruction">IN A,(254)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=byte from port 254.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_18</td>
<td class="address-2"><span id="28471"></span>28471</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="1">Test bit 0 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28473"></span>28473</td>
<td class="instruction">JR Z,<a href="28111.html#28483">Handler_PlayerShipShield_20</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28483">Handler_PlayerShipShield_20</a> if <span class="register">A</span> is equal to 254.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28475"></span>28475</td>
<td class="instruction">BIT 1,A</td>
<td class="comment-1" rowspan="1">Test bit 1 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28477"></span>28477</td>
<td class="instruction">JP Z,<a href="28111.html#28637">Handler_PlayerShipShield_37</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28637">Handler_PlayerShipShield_37</a> if <span class="register">A</span> is equal to 254.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_19</td>
<td class="address-2"><span id="28480"></span>28480</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28481"></span>28481</td>
<td class="instruction">JR <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_20</td>
<td class="address-2"><span id="28483"></span>28483</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28484"></span>28484</td>
<td class="instruction">CP 192</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 192.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28486"></span>28486</td>
<td class="instruction">JR NZ,<a href="28111.html#28498">Handler_PlayerShipShield_21</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28498">Handler_PlayerShipShield_21</a> if <span class="register">A</span> is not equal to 192.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28488"></span>28488</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28491"></span>28491</td>
<td class="instruction">CP 3</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28493"></span>28493</td>
<td class="instruction">JR Z,<a href="28111.html#28563">PlayerShipShield_UpdatePosition</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a> if <span class="register">A</span> is equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28495"></span>28495</td>
<td class="instruction">LD A,(26349)</td>
<td class="comment-1" rowspan="2"><span class="register">L</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_21</td>
<td class="address-2"><span id="28498"></span>28498</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28499"></span>28499</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_22</td>
<td class="address-2"><span id="28501"></span>28501</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28502"></span>28502</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28503"></span>28503</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_23</td>
<td class="address-2"><span id="28505"></span>28505</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28506"></span>28506</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28507"></span>28507</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_24</td>
<td class="address-2"><span id="28509"></span>28509</td>
<td class="instruction">SLA (HL)</td>
<td class="comment-1" rowspan="1">Shift *<span class="register">HL</span> left (with carry).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28511"></span>28511</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28512"></span>28512</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28514"></span>28514</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28515"></span>28515</td>
<td class="instruction">JR Z,<a href="28111.html#28519">Handler_PlayerShipShield_25</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28519">Handler_PlayerShipShield_25</a> if <span class="register">HL</span> is equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28517"></span>28517</td>
<td class="instruction">SET 0,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_25</td>
<td class="address-2"><span id="28519"></span>28519</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28520"></span>28520</td>
<td class="instruction">DJNZ <a href="28111.html#28509">Handler_PlayerShipShield_24</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28509">Handler_PlayerShipShield_24</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28522"></span>28522</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28523"></span>28523</td>
<td class="instruction">RES 0,(HL)</td>
<td class="comment-1" rowspan="1">Reset bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28525"></span>28525</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28526"></span>28526</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28527"></span>28527</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28528"></span>28528</td>
<td class="instruction">DJNZ <a href="28111.html#28505">Handler_PlayerShipShield_23</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28505">Handler_PlayerShipShield_23</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28530"></span>28530</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28531"></span>28531</td>
<td class="instruction">SET 5,L</td>
<td class="comment-1" rowspan="1">Set bit 5 of <span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28533"></span>28533</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28534"></span>28534</td>
<td class="instruction">DJNZ <a href="28111.html#28501">Handler_PlayerShipShield_22</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28501">Handler_PlayerShipShield_22</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28536"></span>28536</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28546">Handler_PlayerShipShield_26</a> if *<a href="26278.html">BulletIndex</a> is equal to 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28539"></span>28539</td>
<td class="instruction">CP 7</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28541"></span>28541</td>
<td class="instruction">JR Z,<a href="28111.html#28546">Handler_PlayerShipShield_26</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28543"></span>28543</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28544"></span>28544</td>
<td class="instruction">JR <a href="28111.html#28547">Handler_PlayerShipShield_27</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28547">Handler_PlayerShipShield_27</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_26</td>
<td class="address-2"><span id="28546"></span>28546</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_27</td>
<td class="address-2"><span id="28547"></span>28547</td>
<td class="instruction">LD (26278),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28550"></span>28550</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Set the bits from <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28551"></span>28551</td>
<td class="instruction">LD A,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28554"></span>28554</td>
<td class="instruction">JR NZ,<a href="28111.html#28557">Handler_PlayerShipShield_28</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28557">Handler_PlayerShipShield_28</a> if <span class="register">A</span> is not equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28556"></span>28556</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_28</td>
<td class="address-2"><span id="28557"></span>28557</td>
<td class="instruction">LD (26349),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28560"></span>28560</td>
<td class="instruction">CALL <a href="27805.html">CheckCollision</a></td>
<td class="comment-1" rowspan="1">Call <a href="27805.html">CheckCollision</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28563"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="27849.html">DrawShip</a>.
</div>
<div class="paragraph">
Update the ship attributes.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">PlayerShipShield_UpdatePosition</td>
<td class="address-2"><span id="28563"></span>28563</td>
<td class="instruction">LD A,(26276)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28720.html">Handler_PlayerBullets</a> if *<a href="26276.html">Flag_Collision</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28566"></span>28566</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28567"></span>28567</td>
<td class="instruction">JP NZ,<a href="28720.html">Handler_PlayerBullets</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28570"></span>28570</td>
<td class="instruction">LD HL,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28573"></span>28573</td>
<td class="instruction">LD A,(26259)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28590">Handler_PlayerShipShield_29</a> if *<a href="26259.html">Flag_Shield</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28576"></span>28576</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28577"></span>28577</td>
<td class="instruction">JR Z,<a href="28111.html#28590">Handler_PlayerShipShield_29</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28579"></span>28579</td>
<td class="instruction">LD A,(26260)</td>
<td class="comment-1" rowspan="3">Jump to <a href="28111.html#28590">Handler_PlayerShipShield_29</a> if bit 2 of *<a href="26260.html">ShieldTimer</a> is not set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28582"></span>28582</td>
<td class="instruction">BIT 2,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28584"></span>28584</td>
<td class="instruction">JR Z,<a href="28111.html#28590">Handler_PlayerShipShield_29</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28586"></span>28586</td>
<td class="instruction">LD A,7</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28588"></span>28588</td>
<td class="instruction">JR <a href="28111.html#28592">Handler_PlayerShipShield_30</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28592">Handler_PlayerShipShield_30</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_29</td>
<td class="address-2"><span id="28590"></span>28590</td>
<td class="instruction">LD A,70</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=INK:YELLOW,
PAPER:BLACK(BRIGHT).</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_30</td>
<td class="address-2"><span id="28592"></span>28592</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_31</td>
<td class="address-2"><span id="28594"></span>28594</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28595"></span>28595</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28596"></span>28596</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28597"></span>28597</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28598"></span>28598</td>
<td class="instruction">CP 70</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 70.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28600"></span>28600</td>
<td class="instruction">JR Z,<a href="28111.html#28606">Handler_PlayerShipShield_32</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28606">Handler_PlayerShipShield_32</a> if <span class="register">A</span> is equal to 70.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28602"></span>28602</td>
<td class="instruction">CP 7</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28604"></span>28604</td>
<td class="instruction">JR NZ,<a href="28111.html#28608">Handler_PlayerShipShield_33</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28608">Handler_PlayerShipShield_33</a> if <span class="register">A</span> is not equal to 7.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_32</td>
<td class="address-2"><span id="28606"></span>28606</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_33</td>
<td class="address-2"><span id="28608"></span>28608</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28609"></span>28609</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28610"></span>28610</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_34</td>
<td class="address-2"><span id="28612"></span>28612</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28613"></span>28613</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28614"></span>28614</td>
<td class="instruction">DJNZ <a href="28111.html#28612">Handler_PlayerShipShield_34</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28612">Handler_PlayerShipShield_34</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28616"></span>28616</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28617"></span>28617</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28618"></span>28618</td>
<td class="instruction">CP 70</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 70.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28620"></span>28620</td>
<td class="instruction">JR Z,<a href="28111.html#28626">Handler_PlayerShipShield_35</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28626">Handler_PlayerShipShield_35</a> if <span class="register">A</span> is equal to 70.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28622"></span>28622</td>
<td class="instruction">CP 7</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28624"></span>28624</td>
<td class="instruction">JR NZ,<a href="28111.html#28628">Handler_PlayerShipShield_36</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28628">Handler_PlayerShipShield_36</a> if <span class="register">A</span> is not equal to 7.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_35</td>
<td class="address-2"><span id="28626"></span>28626</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_36</td>
<td class="address-2"><span id="28628"></span>28628</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="2">Restore <span class="register">AF</span> and <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28629"></span>28629</td>
<td class="instruction">POP HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28630"></span>28630</td>
<td class="instruction">SET 5,L</td>
<td class="comment-1" rowspan="1">Set bit 5 of <span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28632"></span>28632</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28633"></span>28633</td>
<td class="instruction">DJNZ <a href="28111.html#28594">Handler_PlayerShipShield_31</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28594">Handler_PlayerShipShield_31</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28635"></span>28635</td>
<td class="instruction">JR <a href="28720.html">Handler_PlayerBullets</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28720.html">Handler_PlayerBullets</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_37</td>
<td class="address-2"><span id="28637"></span>28637</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28638"></span>28638</td>
<td class="instruction">CP 221</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 221.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28640"></span>28640</td>
<td class="instruction">LD A,(26278)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28643"></span>28643</td>
<td class="instruction">JR NZ,<a href="28111.html#28648">Handler_PlayerShipShield_38</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28648">Handler_PlayerShipShield_38</a> if <span class="register">A</span> is not equal to 221.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28645"></span>28645</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Set the bits from <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28646"></span>28646</td>
<td class="instruction">JR Z,<a href="28111.html#28563">PlayerShipShield_UpdatePosition</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a> if <span class="register">A</span> is equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_38</td>
<td class="address-2"><span id="28648"></span>28648</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="1">Set the bits from <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28649"></span>28649</td>
<td class="instruction">JR Z,<a href="28111.html#28654">Handler_PlayerShipShield_39</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28654">Handler_PlayerShipShield_39</a> if <span class="register">A</span> is equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28651"></span>28651</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28652"></span>28652</td>
<td class="instruction">JR <a href="28111.html#28656">Handler_PlayerShipShield_40</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28656">Handler_PlayerShipShield_40</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_39</td>
<td class="address-2"><span id="28654"></span>28654</td>
<td class="instruction">LD A,7</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=7.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_40</td>
<td class="address-2"><span id="28656"></span>28656</td>
<td class="instruction">LD (26278),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="26278.html">BulletIndex</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28659"></span>28659</td>
<td class="instruction">CP 7</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28661"></span>28661</td>
<td class="instruction">LD A,(26349)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28664"></span>28664</td>
<td class="instruction">JR NZ,<a href="28111.html#28670">Handler_PlayerShipShield_41</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28670">Handler_PlayerShipShield_41</a> if <span class="register">A</span> is not equal to 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28666"></span>28666</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28667"></span>28667</td>
<td class="instruction">LD (26349),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="26349.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_41</td>
<td class="address-2"><span id="28670"></span>28670</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28671"></span>28671</td>
<td class="instruction">ADD A,2</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28673"></span>28673</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28674"></span>28674</td>
<td class="instruction">LD B,2</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=2.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_42</td>
<td class="address-2"><span id="28676"></span>28676</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28677"></span>28677</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28678"></span>28678</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_43</td>
<td class="address-2"><span id="28680"></span>28680</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28681"></span>28681</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28682"></span>28682</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_44</td>
<td class="address-2"><span id="28684"></span>28684</td>
<td class="instruction">SRL (HL)</td>
<td class="comment-1" rowspan="1">Shift *<span class="register">HL</span> right.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28686"></span>28686</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28687"></span>28687</td>
<td class="instruction">BIT 0,(HL)</td>
<td class="comment-1" rowspan="1">Test bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28689"></span>28689</td>
<td class="instruction">RES 0,(HL)</td>
<td class="comment-1" rowspan="1">Reset bit 0 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28691"></span>28691</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28692"></span>28692</td>
<td class="instruction">JR Z,<a href="28111.html#28696">Handler_PlayerShipShield_45</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28696">Handler_PlayerShipShield_45</a> if <span class="register">HL</span> is equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28694"></span>28694</td>
<td class="instruction">SET 7,(HL)</td>
<td class="comment-1" rowspan="1">Set bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerShipShield_45</td>
<td class="address-2"><span id="28696"></span>28696</td>
<td class="instruction">DEC HL</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28697"></span>28697</td>
<td class="instruction">DJNZ <a href="28111.html#28684">Handler_PlayerShipShield_44</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28684">Handler_PlayerShipShield_44</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28699"></span>28699</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28700"></span>28700</td>
<td class="instruction">RES 7,(HL)</td>
<td class="comment-1" rowspan="1">Reset bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28702"></span>28702</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28703"></span>28703</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28704"></span>28704</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28705"></span>28705</td>
<td class="instruction">DJNZ <a href="28111.html#28680">Handler_PlayerShipShield_43</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28680">Handler_PlayerShipShield_43</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28707"></span>28707</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28708"></span>28708</td>
<td class="instruction">SET 5,L</td>
<td class="comment-1" rowspan="1">Set bit 5 of <span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28710"></span>28710</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28711"></span>28711</td>
<td class="instruction">DJNZ <a href="28111.html#28676">Handler_PlayerShipShield_42</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28111.html#28676">Handler_PlayerShipShield_42</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28713"></span>28713</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28714"></span>28714</td>
<td class="instruction">CALL <a href="27805.html">CheckCollision</a></td>
<td class="comment-1" rowspan="1">Call <a href="27805.html">CheckCollision</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28717"></span>28717</td>
<td class="instruction">JP <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28111.html#28563">PlayerShipShield_UpdatePosition</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27886.html">27886</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28111">Map</a></td>
<td class="next">
Next: <a href="28720.html">28720</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Megadodo Software &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/pheenix/">Source code</a>.</div>
<div><a href="../../asm/6DCF.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>