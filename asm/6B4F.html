<!DOCTYPE html>
<html>
<head>
<title>Pheenix: Routine at 6B4F</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="6B31.html">6B31</a>
</td>
<td class="up">Up: <a href="../maps/all.html#6b4f">Map</a></td>
<td class="next">
Next: <a href="6B99.html">6B99</a>
</td>
</tr>
</table>
<div class="description">6B4F: Print Control Menu</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="7DD9.html">Handler_ControlMenu</a>.
</div>
<div class="paragraph">
<table class="">
<tr>
<td class="" colspan="1" rowspan="1"><img alt="menu" src="../images/scr/menu.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Print_ControlMenu</td>
<td class="address-2"><span id="6b4f"></span>6B4F</td>
<td class="instruction">CALL <a href="6720.html">ClearScreen</a></td>
<td class="comment-1" rowspan="1">Call <a href="6720.html">ClearScreen</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b52"></span>
<div class="comments">
<div class="paragraph">
Print "Select Joystick Or Keys".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b52"></span>6B52</td>
<td class="instruction">LD HL,$64D1</td>
<td class="comment-1" rowspan="4">Call <a href="676F.html">Configurable_PrintString</a> using <a href="64D1.html">Messaging_SelectJoystickOrKeys</a>; printing 17 characters in YELLOW.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b55"></span>6B55</td>
<td class="instruction">LD DE,$40C4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b58"></span>6B58</td>
<td class="instruction">LD BC,$1706</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b5b"></span>6B5B</td>
<td class="instruction">CALL <a href="676F.html">Configurable_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b5e"></span>
<div class="comments">
<div class="paragraph">
Print "K - Kempston Stick".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b5e"></span>6B5E</td>
<td class="instruction">LD DE,$4847</td>
<td class="comment-1" rowspan="3">Call <a href="676F.html#6775">SpectrumFont_PrintString</a> using <a href="64D1.html#64e8">Messaging_KempstonJoystick</a>; printing 12 characters in INK:MAGENTA,
PAPER:BLACK(BRIGHT).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b61"></span>6B61</td>
<td class="instruction">LD BC,$1243</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b64"></span>6B64</td>
<td class="instruction">CALL <a href="676F.html#6775">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b67"></span>
<div class="comments">
<div class="paragraph">
Print "A - AGF Stick".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b67"></span>6B67</td>
<td class="instruction">LD E,$87</td>
<td class="comment-1" rowspan="3">Call <a href="676F.html#6775">SpectrumFont_PrintString</a> using <a href="64D1.html#64fa">Messaging_AGFJoystick</a>; printing 0D characters.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b69"></span>6B69</td>
<td class="instruction">LD B,$0D</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b6b"></span>6B6B</td>
<td class="instruction">CALL <a href="676F.html#6775">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b6e"></span>
<div class="comments">
<div class="paragraph">
Print "B - Keyboard".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b6e"></span>6B6E</td>
<td class="instruction">LD E,$C7</td>
<td class="comment-1" rowspan="3">Call <a href="676F.html#6775">SpectrumFont_PrintString</a> using <a href="64D1.html#6507">Messaging_Keyboard</a>; printing 0C characters.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b70"></span>6B70</td>
<td class="instruction">LD B,$0C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b72"></span>6B72</td>
<td class="instruction">CALL <a href="676F.html#6775">SpectrumFont_PrintString</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b75"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use a Kempston joystick?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_Kempston</td>
<td class="address-2"><span id="6b75"></span>6B75</td>
<td class="instruction">LD A,$BF</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">BF</td>
<td class="centre" colspan="1" rowspan="1">ENTER</td>
<td class="centre" colspan="1" rowspan="1">L</td>
<td class="centre" colspan="1" rowspan="1">K</td>
<td class="centre" colspan="1" rowspan="1">J</td>
<td class="centre" colspan="1" rowspan="1">H</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b77"></span>6B77</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b79"></span>6B79</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="6B4F.html#6b81">ControlMenu_Input_AGF</a> if "K" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b7b"></span>6B7B</td>
<td class="instruction">JR NZ,<a href="6B4F.html#6b81">ControlMenu_Input_AGF</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b7d"></span>6B7D</td>
<td class="instruction">LD A,$02</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to Kempston joystick controls (02).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b7f"></span>6B7F</td>
<td class="instruction">JR <a href="6B4F.html#6b96">SetControlMethod</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="6B4F.html#6b96">SetControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b81"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use an AGF joystick?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_AGF</td>
<td class="address-2"><span id="6b81"></span>6B81</td>
<td class="instruction">LD A,$FD</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">FD</td>
<td class="centre" colspan="1" rowspan="1">A</td>
<td class="centre" colspan="1" rowspan="1">S</td>
<td class="centre" colspan="1" rowspan="1">D</td>
<td class="centre" colspan="1" rowspan="1">F</td>
<td class="centre" colspan="1" rowspan="1">G</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b83"></span>6B83</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b85"></span>6B85</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="6B4F.html#6b8d">ControlMenu_Input_Keyboard</a> if "A" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b87"></span>6B87</td>
<td class="instruction">JR NZ,<a href="6B4F.html#6b8d">ControlMenu_Input_Keyboard</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b89"></span>6B89</td>
<td class="instruction">LD A,$01</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to AGF joystick controls (01).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b8b"></span>6B8B</td>
<td class="instruction">JR <a href="6B4F.html#6b96">SetControlMethod</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="6B4F.html#6b96">SetControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="6b8d"></span>
<div class="comments">
<div class="paragraph">
Has the player selected to use the keyboard?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">ControlMenu_Input_Keyboard</td>
<td class="address-2"><span id="6b8d"></span>6B8D</td>
<td class="instruction">LD A,$7F</td>
<td class="comment-1" rowspan="2">Read from the keyboard; <table class="default">
<tr>
<th colspan="1" rowspan="2">Port Number</th>
<th colspan="5" rowspan="1">Bit</th>
</tr>
<tr>
<th colspan="1" rowspan="1">0</th>
<th colspan="1" rowspan="1">1</th>
<th colspan="1" rowspan="1">2</th>
<th colspan="1" rowspan="1">3</th>
<th colspan="1" rowspan="1">4</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">7F</td>
<td class="centre" colspan="1" rowspan="1">SPACE</td>
<td class="centre" colspan="1" rowspan="1">FULL-STOP</td>
<td class="centre" colspan="1" rowspan="1">M</td>
<td class="centre" colspan="1" rowspan="1">N</td>
<td class="centre" colspan="1" rowspan="1">B</td>
</tr>
</table></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b8f"></span>6B8F</td>
<td class="instruction">IN A,($FE)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b91"></span>6B91</td>
<td class="instruction">BIT 4,A</td>
<td class="comment-1" rowspan="2">Jump back to <a href="6B4F.html#6b75">ControlMenu_Input_Kempston</a> if "B" wasn't pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b93"></span>6B93</td>
<td class="instruction">JR NZ,<a href="6B4F.html#6b75">ControlMenu_Input_Kempston</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="6b95"></span>6B95</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1">Set <span class="register">A</span> to keyboard controls (00).</td>
</tr>
<tr>
<td class="asm-label">SetControlMethod</td>
<td class="address-2"><span id="6b96"></span>6B96</td>
<td class="instruction">LD ($66F6),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="66F6.html">ControlMethod</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<div class="comments">
<div class="paragraph">
Continue on to <a href="6B99.html">Print_InstructionsMenu</a>.
</div>
</div>
</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="6B31.html">6B31</a>
</td>
<td class="up">Up: <a href="../maps/all.html#6b4f">Map</a></td>
<td class="next">
Next: <a href="6B99.html">6B99</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Megadodo Software &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/pheenix/">Source code</a>.</div>
<div><a href="../dec/asm/27471.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>