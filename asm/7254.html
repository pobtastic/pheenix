<!DOCTYPE html>
<html>
<head>
<title>Pheenix: Routine at 7254</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="7200.html">7200</a>
</td>
<td class="up">Up: <a href="../maps/all.html#7254">Map</a></td>
<td class="next">
Next: <a href="72C9.html">72C9</a>
</td>
</tr>
</table>
<div class="description">7254: Routine at 7254</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="7C82.html">TitleScreen</a> and <a href="7DD9.html">StartGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="7254"></span>7254</td>
<td class="instruction">LD A,($66A4)</td>
<td class="comment-1" rowspan="3">Jump to <a href="72C9.html#730d">730D</a> if *<a href="66A4.html">Flag_Collision</a> is not equal to 02.</td>
</tr>
<tr>
<td class="address-1"><span id="7257"></span>7257</td>
<td class="instruction">CP $02</td>
</tr>
<tr>
<td class="address-1"><span id="7259"></span>7259</td>
<td class="instruction">JP NZ,<a href="72C9.html#730d">$730D</a></td>
</tr>
<tr>
<td class="address-1"><span id="725c"></span>725C</td>
<td class="instruction">LD A,($66F1)</td>
<td class="comment-1" rowspan="3">Jump to <a href="7254.html#7277">7277</a> if *<a href="66F1.html">Phase</a> is not equal to 04.</td>
</tr>
<tr>
<td class="address-1"><span id="725f"></span>725F</td>
<td class="instruction">CP $04</td>
</tr>
<tr>
<td class="address-1"><span id="7261"></span>7261</td>
<td class="instruction">JR NZ,<a href="7254.html#7277">$7277</a></td>
</tr>
<tr>
<td class="address-1"><span id="7263"></span>7263</td>
<td class="instruction">LD HL,$65DD</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html">65DD</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="7266"></span>7266</td>
<td class="instruction">LD B,$08</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=08.</td>
</tr>
<tr>
<td class="address-2"><span id="7268"></span>7268</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="7269"></span>7269</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="726a"></span>726A</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="726b"></span>726B</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="726c"></span>726C</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="726d"></span>726D</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="726e"></span>726E</td>
<td class="instruction">BIT 6,D</td>
<td class="comment-1" rowspan="2">Call <a href="7564.html">7564</a> if bit 6 of <span class="register">D</span> is active.</td>
</tr>
<tr>
<td class="address-1"><span id="7270"></span>7270</td>
<td class="instruction">CALL NZ,<a href="7564.html">$7564</a></td>
</tr>
<tr>
<td class="address-1"><span id="7273"></span>7273</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="2">Restore <span class="register">HL</span> and <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="7274"></span>7274</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="address-1"><span id="7275"></span>7275</td>
<td class="instruction">DJNZ <a href="7254.html#7268">$7268</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="7254.html#7268">7268</a> until counter is zero.</td>
</tr>
<tr>
<td class="address-2"><span id="7277"></span>7277</td>
<td class="instruction">LD HL,$6680</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="6680.html">6680</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="727a"></span>727A</td>
<td class="instruction">LD DE,$6681</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="6680.html">6681</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="727d"></span>727D</td>
<td class="instruction">LD BC,$006C</td>
<td class="comment-1" rowspan="1"><span class="register">BC</span>=006C.</td>
</tr>
<tr>
<td class="address-1"><span id="7280"></span>7280</td>
<td class="instruction">LD (HL),B</td>
<td class="comment-1" rowspan="1">Write <span class="register">B</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="7281"></span>7281</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="address-1"><span id="7283"></span>7283</td>
<td class="instruction">LD HL,$65DD</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html">65DD</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="7286"></span>7286</td>
<td class="instruction">LD DE,$65DE</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="65DD.html">65DE</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="7289"></span>7289</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="728a"></span>728A</td>
<td class="instruction">LD C,$1D</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=1D.</td>
</tr>
<tr>
<td class="address-1"><span id="728c"></span>728C</td>
<td class="instruction">LD (HL),B</td>
<td class="comment-1" rowspan="1">Write <span class="register">B</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="728d"></span>728D</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="address-1"><span id="728f"></span>728F</td>
<td class="instruction">LD HL,$6637</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html#6637">6637</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="7292"></span>7292</td>
<td class="instruction">LD A,($66F1)</td>
<td class="comment-1" rowspan="3">Jump to <a href="7254.html#729d">729D</a> if *<a href="66F1.html">Phase</a> is not zero.</td>
</tr>
<tr>
<td class="address-1"><span id="7295"></span>7295</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="address-1"><span id="7296"></span>7296</td>
<td class="instruction">JR NZ,<a href="7254.html#729d">$729D</a></td>
</tr>
<tr>
<td class="address-1"><span id="7298"></span>7298</td>
<td class="instruction">LD HL,$65FB</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html#65fb">65FB</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="729b"></span>729B</td>
<td class="instruction">JR <a href="7254.html#72ad">$72AD</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="7254.html#72ad">72AD</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="729d"></span>729D</td>
<td class="instruction">CP $01</td>
<td class="comment-1" rowspan="2">Jump to <a href="7254.html#72a6">72A6</a> if <span class="register">A</span> is not equal to 01.</td>
</tr>
<tr>
<td class="address-1"><span id="729f"></span>729F</td>
<td class="instruction">JR NZ,<a href="7254.html#72a6">$72A6</a></td>
</tr>
<tr>
<td class="address-1"><span id="72a1"></span>72A1</td>
<td class="instruction">LD HL,$6619</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html#6619">6619</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="72a4"></span>72A4</td>
<td class="instruction">JR <a href="7254.html#72ad">$72AD</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="7254.html#72ad">72AD</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="72a6"></span>72A6</td>
<td class="instruction">CP $04</td>
<td class="comment-1" rowspan="2">Jump to <a href="7254.html#72ad">72AD</a> if <span class="register">A</span> is not equal to 04.</td>
</tr>
<tr>
<td class="address-1"><span id="72a8"></span>72A8</td>
<td class="instruction">JR NZ,<a href="7254.html#72ad">$72AD</a></td>
</tr>
<tr>
<td class="address-1"><span id="72aa"></span>72AA</td>
<td class="instruction">LD HL,$6647</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="65DD.html#6647">6647</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="72ad"></span>72AD</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1">Restore <span class="register">DE</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="72ae"></span>72AE</td>
<td class="instruction">LD A,($667F)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="667F.html">667F</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="72b1"></span>72B1</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1">Multiply <span class="register">A</span> by 02.</td>
</tr>
<tr>
<td class="address-1"><span id="72b2"></span>72B2</td>
<td class="instruction">JR Z,<a href="7254.html#72b7">$72B7</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="7254.html#72b7">72B7</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="72b4"></span>72B4</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="72b5"></span>72B5</td>
<td class="instruction">LDIR</td>
<td class="comment-1" rowspan="1">LDIR.</td>
</tr>
<tr>
<td class="address-2"><span id="72b7"></span>72B7</td>
<td class="instruction">LD HL,$66ED</td>
<td class="comment-1" rowspan="2">Write CE to *<a href="66ED.html">PlayerAttributeBufferPosition</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="72ba"></span>72BA</td>
<td class="instruction">LD (HL),$CE</td>
</tr>
<tr>
<td class="address-1"><span id="72bc"></span>72BC</td>
<td class="instruction">LD HL,$66F0</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="66F0.html">Player_Lives</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="72bf"></span>
<div class="comments">
<div class="paragraph">
See <a href="../reference/pokes.html#infinite-lives">Infinite Lives</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="72bf"></span>72BF</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease <a href="66F0.html">Player_Lives</a> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="72c0"></span>72C0</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="72C9.html">72C9</a> if *<a href="66F0.html">Player_Lives</a> indicates the player still has lives left.</td>
</tr>
<tr>
<td class="address-1"><span id="72c1"></span>72C1</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="address-1"><span id="72c2"></span>72C2</td>
<td class="instruction">JR NZ,<a href="72C9.html">$72C9</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="72c4"></span>
<div class="comments">
<div class="paragraph">
Player has lost all their lives, set the *<a href="66F5.html">Flag_GameOver</a> flag.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="72c4"></span>72C4</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="2">Write 01 to *<a href="66F5.html">Flag_GameOver</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="72c5"></span>72C5</td>
<td class="instruction">LD ($66F5),A</td>
</tr>
<tr>
<td class="address-1"><span id="72c8"></span>72C8</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="7200.html">7200</a>
</td>
<td class="up">Up: <a href="../maps/all.html#7254">Map</a></td>
<td class="next">
Next: <a href="72C9.html">72C9</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Megadodo Software &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/pheenix/">Source code</a>.</div>
<div><a href="../dec/asm/29268.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>